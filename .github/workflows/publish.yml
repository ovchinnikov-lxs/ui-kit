    name: Publish

    on:
        push:
            branches:
                - master

    jobs:
        bump_tag:
            name: Lint/Build/Bump tag ğŸ”¨x ğŸ‘· x ğŸ·
            runs-on: ubuntu-latest
            strategy:
                matrix:
                    node-version: [16.x]
            steps:
                - name: Checkout ğŸ›ï¸
                  uses: actions/checkout@v3

                - uses: actions/setup-node@v3
                  with:
                      node-version: ${{ matrix.node-version }}

                - name: Install dependents ğŸ”§
                  run: npm ci

                - name: Run Test ğŸ”¨
                  run: npm run lint:check

                - name: Build ğŸ‘·
                  run: npm run build

                - name: Bump Tag ğŸ·
                  run: |
                      git config --global user.email "${{ github.event.pusher.email }}"
                      git config --global user.name "${{ github.event.pusher.name }}"

                      npm run bump

                      git push && git push --tags

        publish:
            name: Publish ğŸš€
            runs-on: ubuntu-latest
            strategy:
                matrix:
                    node-version: [16.x]
            steps:
                - name: Checkout ğŸ›ï¸
                  uses: actions/checkout@v3

                - name: Install NPM ğŸ”§
                  uses: actions/setup-node@v3
                  with:
                      node-version: ${{ matrix.node-version }}
                      registry-url: https://npm.pkg.github.com/

                - name: Publish ğŸš€
                  run: |
                      npm ci
                      npm run build
                      npm cache verify
                      npm publish
                  env:
                      NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}


